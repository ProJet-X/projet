<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>
<style>
img { 

    width:80%; 
}

a:hover {
    background-color: orange;
}

table, th, td {
  border: 1px solid black;
}

</style>
<script type="text/javascript">
window.onload = function setOrgs() {
  var myDivOrgs = document.getElementById("myDivOrgs");

  //Create array of options to be added
  var array = "{{orgs | safe }}";

  //Create and append select list
  var selectList = document.createElement("select");
  selectList.setAttribute("id", "mySelect");
  myDivOrgs.appendChild(selectList);

  //Create and append the options
  for (var i = 0; i < array.length; i++) {
      var option = document.createElement("option");
      option.setAttribute("value", array[i]);
      option.text = array[i];
      selectList.appendChild(option);
  }
}

</script>
</head>
<body>
<title>ProJet Dashboard</title>
<form action="" method="post">
  <fieldset>
    <legend>ProJet</legend>
    Org:<br>
    <input type="text" name="org" id="org" placeholder="org" value="TesteProGest" autofocus>
    <br>
    Repo:<br>
    <input type="text" name="repo" value="progest" placeholder="repo">
    <br><br>
    <input type="submit" value="Projet"><br>
    <br>
    <a href="/logout" target="_top" align="right" >LOGOUT</a>
    <div id="myDivOrgs" align="middle">Orgs</div>
    <div id="myDivRepos" align="right">Repos {{orgs}}</div>
  </fieldset>
</form>
{% if render %}
  <h1>DashBoard - {{org}}/{{repo}}</h1>
  <h2>Indicadores gerais</h2>
  <table>
  <tr>
  <th>  Issues  </th>
  <th>  Tarefas  </th>
  <th>  Pull requests  </th>
  <th>  Pontos  </th>
  <th>  Tarefas planeadas </th>
  <th>  Tarefas não planejadas </th>
  </tr>
  <tr>
  <td>  {{issuesIndicators[0]}} </td>
  <td>  {{issuesIndicators[1]}} </td>
  <td>  {{issuesIndicators[2]}} </td>
  <td>  {{issuesIndicators[3]}} </td> 
  <td>  {{issuesIndicators[4]}} </td>
  <td>  {{issuesIndicators[5]}} </td>
  </tr>
  </table>
  <h2>Gráficos</h2>
  <div id="myfirstchart" style="height: 250px;"></div>
  <img src={{ charts[0] }} alt="ChartA" align="middle">
  <p>{{ a }}</p>
  <img src={{ charts[1] }} alt="ChartB" align="middle">
  <p>{{ b }}</p>
  <img src={{ charts[2] }} alt="ChartC" align="middle">
  <img src={{ charts[3] }} alt="ChartD" align="middle">
  <img src={{ charts[4] }} alt="ChartE" align="middle">
  <img src={{ charts[5] }} alt="ChartF" align="middle">
  <img src={{ charts[6] }} alt="ChartG" align="middle">
  <img src={{ charts[7] }} alt="ChartH" align="middle">
  <img src={{ charts[8] }} alt="ChartI" align="middle">
  <img src={{ charts[9] }} alt="ChartJ" align="middle">
  <h2>Resumo dev time</h2>
  <table>
  <tr>
  <th>  Devs  </th>
  <th>  IDs  </th>
  <th>  Pontos  </th>
  <th>  Criada  </th>
  <th>  Em desenvolvimento  </th>
  <th>  Terminada  </th>
  
  </tr>
  <tr>
  <td>  {{devs}} </td>
  <td>  {{taskID}} </td>
  <td>  {{taskPoints}} </td>
  <td>  {{created_at}} </td>
  <td>  {{working}} </td>
  <td>  {{done}} </td>
  </tr>
  </table>
{% else %}
  <h1>Ops!</h1>
  <p>Please <a href="/login" target="_top">try again</a></p>
  <p>If persists, try <a href="/logout" target="_top">later</a></p>
{% endif %}
<script type="text/javascript">
new Morris.Line({
  // ID of the element in which to draw the chart.
  element: 'myfirstchart',
  // Chart data records -- each entry in this array corresponds to a point on
  // the chart.
  data: [
    { year: '2008', value: 20 },
    { year: '2009', value: 10 },
    { year: '2010', value: 5 },
    { year: '2011', value: 5 },
    { year: '2012', value: 20 }
  ],
  // The name of the data record attribute that contains x-values.
  xkey: 'year',
  // A list of names of data record attributes that contain y-values.
  ykeys: ['value'],
  // Labels for the ykeys -- will be displayed when you hover over the
  // chart.
  labels: ['Value']
});
</script>
</body>
</html>
